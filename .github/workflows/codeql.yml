name: 'Internal data extensions'
on:
  push:
    branches:
    - main
  pull_request:
    types:
    - opened
    - synchronize
    - reopened
    - ready_for_review
    branches:
    - main
  workflow_dispatch: {}

permissions:
  contents: read
  security-events: write
  pull-requests: read
  actions: read
  statuses: write
  checks: read

jobs:
  codeql:
    runs-on: ubuntu-latest
    env:
      TEST_MODE: true
      GITHUB_TOKEN: '${{ secrets.EXTRA_TOKEN }}'

    steps:
    - name: Check out repository
      uses: actions/checkout@v3

    - name: Init
      uses: github/codeql-action/init@main
      with:
        # tools: https://github.com/github/semmle-code/releases/download/untagged-fd9247d3b4be3fdfc8ec/codeql-bundle-linux64.tar.gz
        config-file: ./.github/codeql/codeql-config.yml
        languages: javascript
        # token: '${{ secrets.EXTRA_TOKEN }}'
        debug: true

    - name: Analyze
      uses: github/codeql-action/analyze@main
